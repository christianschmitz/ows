## P2P network

Each OWS *project* has its own P2P network of private servers.

Currently only **Linux x86-64** servers are supported.

Projects are unlikely to need more than 100 servers, and nodes are non-adverserial, so the nodes can syncronize their state using a variant of message [flooding](https://en.wikipedia.org/wiki/Flooding_algorithm). The flooding topology can be optimized using precise knowledge of all the other nodes.

### Bootstrapping

The first server of a project is called the *bootstrap server*, and must be configured manually.

Manual server configuration consists of the following steps (as root user):
   1. Set environment variable `OWS_PRIVATE_KEY` to the server's Ed25519 private key (base64 encoded)
   2. Set environment variable `OWS_INITIAL_CONFIG` to the initial project configuration (base64 encoded)
   3. Install the node
   4. Start the node

The initial project configuration can be generated by the client.
### Adding servers

Once compute providers have been configured, additional servers can be added to the P2P network automatically.

### Distribution of persistent resources

Examples of persistent resources are:
   - Database table partitions
   - Assets (i.e. files)

Both nodes and resources are defined by a 16 byte identifier.
Similar to [Kademlia](https://en.wikipedia.org/wiki/Kademlia), a distance function can calculate a "distance" between a resource and the nodes, and the closest 3 nodes are then charged with persisting the resource.